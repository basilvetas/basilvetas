# Demystifying Your Coinbase Account

Coinbase just added over [100k new users within 24 hours](https://www.bloomberg.com/news/articles/2017-11-02/bitcoin-exchange-added-100-000-users-in-a-day-as-price-exploded), which means there are probably about 100k individuals out there feeling slightly perplexed by some of the nomenclature they are running into as (presumably) first-time crypto investors.

Maybe the biggest challenge initially for a new Coinbase user is making sense of the structure of their accounts or "wallets" where the cryptocurrency is actually held. Currently, Coinbase supports three different cryptocurrenies: bitcoin (BTC), ether (ETH) and litecoin (LTC). Each of these has a corresponding account: BTC Wallet, ETH Wallet and LTC Wallet. So what exactly are these accounts and how do they differ from a traditional bank account? According to Coinbase:

> A bitcoin wallet is a collection of bitcoin addresses. A bitcoin address is used to specify where to send bitcoin. An address can be used multiple times, but by default Coinbase uses a new address for every transaction.

So essentially each of your wallets (BTC, ETH, LTC) can have one or more associated addresses. Each time you receive digital currency, a new address is generated for that transaction and associated with the respective account. In Coinbase, you can view the addresses associated with each of your wallets under the Tools tab. If this is your first encounter with bitcoin addresses, for now just keep in mind that an address typically looks like: 1BvBMSEYstWetqTFn5Au4m4GFg7xJaNVN2

![Crypto Wallets](images/wallets.png)

### Bitcoin Transactions

In the same way that I need to know your bank account number (and routing number for that matter) if I want to transfer money to you, I need to know your bitcoin address if I want to send bitcoin to you. But note the important differences between a bitcoin address and a traditional bank account number: a traditional bank account is symmetric, namely, if I know your bank account and routing numbers, not only can I send money to you, but it is also very easy for me to withdraw money from your account. A bitcoin address is asymmetric, so knowing it allows me to send bitcoin to it, but there is no way I can withdraw bitcoin from it. That means that you can share you bitcoin addresses with anyone in the world and it does not put you at any risk. In this way, it is a much safer structure than status quo money transfer.

One downside of this asymmetry, however, is that if you receive bitcoin from a friend via some bitcoin address, it is not always safe to assume you can send it back to your friend at the same address, which in general can make it difficult to reverse cryptocurrency transactions. There are a [number of reasons](https://en.bitcoin.it/wiki/From_address) for this, but the easiest best practice is to always generate a new bitcoin recipient address for each transaction. There is a lot more to talk about in regard to bitcoin addresses, where they come from, and why you can have so many of them (as opposed to a traditional bank account number which never changes), but I'm going to save that for a later post. For now, I want to touch on an important nuance with regard to how your cryptocurrency is actually stored within your respective wallets.

In the Bitcoin network, whenever you send or receive bitcoin the transaction will be recorded in the Bitcoin blockchain, a digital ledger of all transactions that have ever taken place on the network. This ledger is publicly viewable, so anyone can verify the legitimacy of transactions. The same is true for the Ethereum or Litecoin networks and their respective blockchains. However, as a new Coinbase user, you might notice something peculiar as you begin to send and receive cryptocurrency. Recall that your bitcoin addresses are the destination for receiving bitcoin, and your bitcoin wallet is made up of bitcoin addresses. This intuitively implies that if you have received bitcoin into your wallet, then the addresses should have a balance reflected on the network's blockchain equal to your wallet balance. With Coinbase transactions sometimes this is true, but often times it's not.

### Off-Chain Transactions

Have a friend send some bitcoin to you via Coinbase and wait until you can see the balance reflected in your BTC Wallet. Now go search your bitcoin address on a block explorer like [blockchain.info](https://blockchain.info/) (or [etherscan.io](https://etherscan.io/) for ether transactions): you might find that the transaction actually shows up on the blockchain and you can see your balance. But there's also a good chance that you find either zero or two transactions have occurred, and in either of these cases your balance for that bitcoin address is zero. In fact, there's even a possibility that the address balance shown on the blockchain is more than what you have stored in your bitcoin wallet. What gives? Aren' all transactions supposed to be recorded on the blockchain? Isn't that the point of this technology, an immutable digital ledger?

The answer lies in how Coinbase stores your cryptocurrency behind the scenes, namely, they keep all your bitcoin, ether and litecoin in accounts that they control. They are essentially holding your cryptocurrency for you, and they have as much control over your cryptocurrency as a traditional custodian bank has over your money.  So, if your friend sends you bitcoin from another Coinbase account, then because Coinbase is also the custodian of your friend's bitcoin, then no bitcoin actually has to change hands. Coinbase just updates your respective balances in their internal database, like any other bank would do, and nothing gets recorded in the blockchain. These types of transactions are known as "off-chain" transactions. In this case, if you try to search your bitcoin address on a block explorer it will say zero transactions have taken place. Off-chain transactions are also why the blockchain could show a balance greater than what you have in your Coinbase account: if you've sent bitcoin to friends via off-chain transactions, but those bitcoin never actually left your bitcoin address. In practice, the way to make an off-chain transaction on Coinbase is to send bitcoin via the email address option rather than sending it directly to a bitcoin address.

![Off Chain Transactions](images/off-chain-transactions.png)

### On-Chain Transactions

The other possible scenario is if your friend sends you bitcoin from a non-Coinbase wallet. Now, since Coinbase is not the custodian then the bitcoin will be sent directly to your bitcoin address and a new transaction (Tx) will be recorded in the blockchain. If you viewed the block explorer at this point you'll see one transaction with the correct balance at your address. However, because Coinbase controls that address for you, don't be surprised if at some point they transfer your bitcoin to another address that is not associated with your account (a second Tx). There are a few reasons why Coinbase might do this: it allows them to keep some assets in cold storage, and facilitates other optimizations behind the scenes. The time it takes until they make this transfer likely depends on the cost of network transaction fees.

In any case, once this happens, searching your bitcoin address in the block explorer will show two transactions: one from your friend's address to your address, and one from your address to Coinbase's address. These two transactions are normal "on-chain" transactions because they get recorded on the blockchain. Additionally, since Coinbase moves bitcoin around among addresses in this manner, when you send bitcoin to external addresses you'll notice that often your sender address is not actually associated with your account. This overall structure is reflected below for receiving bitcoin, but a similar process takes place for receiving ether or litecoin as well. Important to note, although certain bitcoin addresses are associated with your wallet, and other people's addresses with their wallets, behind the scenes all these addresses are equally controlled by Coinbase and the only balances that matter to them are their internal account balances, as opposed to transactions and balances displayed on the blockchain.

![On Chain Transactions](images/on-chain-transactions.png)

For Coinbase users, there are a few advantages as well as disadvantages to this structure. One advantage is that off-chain transactions have no fees, as opposed to on-chain transactions that carry a fee paid to bitcoin miners for validating new transaction blocks. More on fees [here](https://support.coinbase.com/customer/portal/articles/815435-does-coinbase-pay-bitcoin-miner-fees). Another advantage is that off-chain transactions are instantaneous because you don't need to wait for the transaction to be confirmed on the blockchain. However, the major disadvantage compared to other wallets is that as a Coinbase user you are sacrificing some of the decentralization, pseudonymity and control over your assets, which for many is the primary appeal of blockchain technology in the first place. Coinbase has the ability to freeze your assets, Coinbase can keep record of your transactions and Coinbase can be audited just like any other custodian bank.

I want to be clear though, that this is not a criticism of Coinbase. Coinbase has taken many steps to protect user privacy, even in the face of [subpoena from the IRS](https://medium.com/@barmstrong/coinbase-and-the-irs-c4e2e386e0cf). In fact, a big reason why Coinbase has played such a major role in bringing cryptocurrencies mainstream is because of their commitment to compliance and transparency. And most users are perfectly comfortable with making the sacrifices mentioned above because it is what we are accustomed to with traditional banking. For investors who simply want to gain exposure to this exciting new asset class of cryptocurrencies, Coinbase is the perfect gateway application. However, for individuals who want to take full advantage of a global decentralized digital currency on the blockchain, it is important to understand the tradeoffs between using a Coinbase account versus other less-centralized wallet solutions.